{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"equipment_container\"\n};\nconst _hoisted_2 = {\n  class: \"add_equipment\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"type\"\n}, \"Тип оборудования\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"serial_number\"\n}, \"Серийный номер\", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"text\"\n}, \"Примечание\", -1 /* HOISTED */);\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Добавить\")], -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"equipment_content\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Оборудование\", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"equipment_list\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"type\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.fk_type = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.fk_type]])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"serial_number\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.serial_number = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.serial_number]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    id: \"text\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.text = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.text]])]), _hoisted_9], 32 /* HYDRATE_EVENTS */)]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"ul\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.data.results, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id\n    }, [_createElementVNode(\"h3\", null, \"Тип оборудования: \" + _toDisplayString(item.fk_type), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Серийный номер: \" + _toDisplayString(item.serial_number), 1 /* TEXT */), _createElementVNode(\"p\", null, \"Примечание: \" + _toDisplayString(item.text), 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $options.toggleEquipment(item)\n    }, _toDisplayString(item.completed ? 'Отменить' : 'Редактировать'), 9 /* TEXT, PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteEquipment(item)\n    }, \"Удалить\", 8 /* PROPS */, _hoisted_14)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_3","_hoisted_4","id","$data","fk_type","$event","_hoisted_5","_hoisted_6","serial_number","_hoisted_7","_hoisted_8","text","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","_renderList","data","results","item","key","_toDisplayString","onClick","toggleEquipment","completed","_hoisted_13","deleteEquipment","_hoisted_14"],"sources":["/home/pavel/Документы/NEW_DJUNGO_PROJECTS/test_api/frontend/django_client/src/components/EquipmentDrf.vue"],"sourcesContent":["<template>\n    <div class=\"equipment_container\">\n        <div class=\"add_equipment\">\n            <form v-on:submit.prevent=\"submitForm\">\n                <div class=\"form-group\">\n                    <label for=\"type\">Тип оборудования</label>\n                    <input type=\"text\" class=\"form-control\" id=\"type\" v-model=\"fk_type\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"serial_number\">Серийный номер</label>\n                    <input type=\"text\" class=\"form-control\" id=\"serial_number\" v-model=\"serial_number\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"text\">Примечание</label>\n                    <textarea class=\"form-control\" id=\"text\" v-model=\"text\"></textarea>\n                </div>\n                <div class=\"form-group\">\n                    <button type=\"submit\">Добавить</button>\n                </div>\n            </form>\n        </div>\n        <div class=\"equipment_content\">\n            <h1>Оборудование</h1>\n            <ul class=\"equipment_list\">\n                <li v-for=\"item in data.results\" :key=\"item.id\">\n                    <h3>Тип оборудования: {{ item.fk_type }}</h3>\n                    <p>Серийный номер: {{ item.serial_number }}</p>\n                    <p>Примечание: {{ item.text }}</p>\n                    <button @click=\"toggleEquipment(item)\">\n                        {{ item.completed ? 'Отменить' : 'Редактировать' }}\n                    </button>\n                    <button @click=\"deleteEquipment(item)\">Удалить</button>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        data() {\n            return {\n                data: [],\n                fk_type: '',\n                serial_number: '',\n                text: ''\n            }\n        },\n        methods: {\n            async getData() {\n                try {\n                    const response = await axios.get('http://127.0.0.1:9000/equipment/');\n                    this.data = response.data;\n                    console.log('received data: ', response.data);\n                } catch (error) {\n                    // log the error\n                    console.log(error);\n                }\n            },\n            async submitForm(){\n                try {\n                    // Send a POST request to the API\n                    const response = await axios.post('http://localhost:9000/equipment/', {\n                        fk_type: this.fk_type,\n                        serial_number: this.serial_number,\n                        text: this.text,\n                        completed: false\n                    });\n                    this.equipment.push(response.data);\n                    this.fk_type = '';\n                    this.serial_number = '';\n                    this.text = '';\n                } catch (error) {\n                    // Log the error\n                    console.log(error);\n                }\n            },\n            async toggleEquipment(item){\n                try{\n\n                    // Send a request to API to update the equipment\n                    const response = await axios.put(`http://localhost:9000/equipment/${item.id}/`, {\n                       \"Access-Control-Allow-Origin\": \"*\",\n                        completed: !item.completed,\n                        fk_type: item.fk_type,\n                        serial_number: item.serial_number,\n                        text: item.text\n                    });\n\n                    let itemIndex = this.equipment.findIndex(e => e.id === item.id);\n\n                    this.equipment = this.equipment.map((item) => {\n                        if(this.equipment.findIndex(e => e.id === item.id) === itemIndex){\n                            return response.data;\n                        }\n                        return item;\n                    });\n\n                }catch(error){\n                    console.log(error);\n                }\n            },\n            async deleteEquipment(item){\n                // Confirm if one wants to delete the item\n                let confirmation = confirm(\"Вы действительно хотите удалить оборудование?\");\n                if(confirmation){\n                    try{\n                        // Send a request to delete the item\n                        await axios.delete(`http://localhost:9000/equipment/${item.id}`);\n                        // Refresh the equipment list\n                        this.getData();\n                    }catch(error){\n                        console.log(error)\n                    }\n                }\n            }\n        },\n        created() {\n            this.getData();\n        }\n    }\n</script>"],"mappings":";;EACSA,KAAK,EAAC;AAAqB;;EACvBA,KAAK,EAAC;AAAe;;EAEbA,KAAK,EAAC;AAAY;gCACnBC,mBAAA,CAA0C;EAAnCC,GAAG,EAAC;AAAM,GAAC,kBAAgB;;EAGjCF,KAAK,EAAC;AAAY;gCACnBC,mBAAA,CAAiD;EAA1CC,GAAG,EAAC;AAAe,GAAC,gBAAc;;EAGxCF,KAAK,EAAC;AAAY;gCACnBC,mBAAA,CAAoC;EAA7BC,GAAG,EAAC;AAAM,GAAC,YAAU;gCAGhCD,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAY,I,aACnBC,mBAAA,CAAuC;EAA/BE,IAAI,EAAC;AAAQ,GAAC,UAAQ,E;;EAIrCH,KAAK,EAAC;AAAmB;iCAC1BC,mBAAA,CAAqB,YAAjB,cAAY;;EACZD,KAAK,EAAC;AAAgB;;;;uBAtBlCI,mBAAA,CAkCM,OAlCNC,UAkCM,GAjCFJ,mBAAA,CAkBM,OAlBNK,UAkBM,GAjBFL,mBAAA,CAgBO;IAhBIM,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MACjCT,mBAAA,CAGM,OAHNY,UAGM,GAFFC,UAA0C,E,gBAC1Cb,mBAAA,CAAoE;IAA7DE,IAAI,EAAC,MAAM;IAACH,KAAK,EAAC,cAAc;IAACe,EAAE,EAAC,MAAM;+DAAUC,KAAA,CAAAC,OAAO,GAAAC,MAAA;iDAAPF,KAAA,CAAAC,OAAO,E,KAEtEhB,mBAAA,CAGM,OAHNkB,UAGM,GAFFC,UAAiD,E,gBACjDnB,mBAAA,CAAmF;IAA5EE,IAAI,EAAC,MAAM;IAACH,KAAK,EAAC,cAAc;IAACe,EAAE,EAAC,eAAe;+DAAUC,KAAA,CAAAK,aAAa,GAAAH,MAAA;iDAAbF,KAAA,CAAAK,aAAa,E,KAErFpB,mBAAA,CAGM,OAHNqB,UAGM,GAFFC,UAAoC,E,gBACpCtB,mBAAA,CAAmE;IAAzDD,KAAK,EAAC,cAAc;IAACe,EAAE,EAAC,MAAM;+DAAUC,KAAA,CAAAQ,IAAI,GAAAN,MAAA;iDAAJF,KAAA,CAAAQ,IAAI,E,KAE1DC,UAEM,C,8BAGdxB,mBAAA,CAaM,OAbNyB,WAaM,GAZFC,WAAqB,EACrB1B,mBAAA,CAUK,MAVL2B,WAUK,I,kBATDxB,mBAAA,CAQKyB,SAAA,QAAAC,WAAA,CARcd,KAAA,CAAAe,IAAI,CAACC,OAAO,EAApBC,IAAI;yBAAf7B,mBAAA,CAQK;MAR6B8B,GAAG,EAAED,IAAI,CAAClB;QACxCd,mBAAA,CAA6C,YAAzC,oBAAkB,GAAAkC,gBAAA,CAAGF,IAAI,CAAChB,OAAO,kBACrChB,mBAAA,CAA+C,WAA5C,kBAAgB,GAAAkC,gBAAA,CAAGF,IAAI,CAACZ,aAAa,kBACxCpB,mBAAA,CAAkC,WAA/B,cAAY,GAAAkC,gBAAA,CAAGF,IAAI,CAACT,IAAI,kBAC3BvB,mBAAA,CAES;MAFAmC,OAAK,EAAAlB,MAAA,IAAEP,QAAA,CAAA0B,eAAe,CAACJ,IAAI;wBAC7BA,IAAI,CAACK,SAAS,uDAAAC,WAAA,GAErBtC,mBAAA,CAAuD;MAA9CmC,OAAK,EAAAlB,MAAA,IAAEP,QAAA,CAAA6B,eAAe,CAACP,IAAI;OAAG,SAAO,iBAAAQ,WAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}
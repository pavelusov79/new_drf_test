{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      data: [],\n      fk_type: '',\n      serial_number: '',\n      text: ''\n    };\n  },\n  methods: {\n    async getData() {\n      try {\n        const response = await axios.get('http://127.0.0.1:9000/equipment/');\n        this.data = response.data;\n        console.log('received data: ', response.data);\n      } catch (error) {\n        // log the error\n        console.log(error);\n      }\n    },\n    async submitForm() {\n      try {\n        // Send a POST request to the API\n        const response = await axios.post('http://localhost:9000/equipment/', {\n          fk_type: this.fk_type,\n          serial_number: this.serial_number,\n          text: this.text,\n          completed: false\n        });\n        this.equipment.push(response.data);\n        this.fk_type = '';\n        this.serial_number = '';\n        this.text = '';\n      } catch (error) {\n        // Log the error\n        console.log(error);\n      }\n    },\n    async toggleEquipment(item) {\n      try {\n        // Send a request to API to update the equipment\n        const response = await axios.put(`http://localhost:9000/equipment/${item.id}/`, {\n          cors: {\n            origin: \"http://localhost:8080\",\n            methods: [\"POST\"]\n          },\n          completed: !item.completed,\n          fk_type: item.fk_type,\n          serial_number: item.serial_number,\n          text: item.text\n        });\n        let itemIndex = this.equipment.findIndex(e => e.id === item.id);\n        this.equipment = this.equipment.map(item => {\n          if (this.equipment.findIndex(e => e.id === item.id) === itemIndex) {\n            return response.data;\n          }\n          return item;\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async deleteEquipment(item) {\n      // Confirm if one wants to delete the item\n      let confirmation = confirm(\"Do you want to delete this item?\");\n      if (confirmation) {\n        try {\n          // Send a request to delete the item\n          await axios.delete(`http://localhost:9000/equipment/${item.id}`);\n          // Refresh the equipment list\n          this.getData();\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n  },\n  created() {\n    this.getData();\n  }\n};","map":{"version":3,"names":["axios","data","fk_type","serial_number","text","methods","getData","response","get","console","log","error","submitForm","post","completed","equipment","push","toggleEquipment","item","put","id","cors","origin","itemIndex","findIndex","e","map","deleteEquipment","confirmation","confirm","delete","created"],"sources":["/home/pavel/Документы/NEW_DJUNGO_PROJECTS/test_api/frontend/django_client/src/components/EquipmentDrf.vue"],"sourcesContent":["<template>\n    <div class=\"equipment_container\">\n        <div class=\"add_equipment\">\n            <form v-on:submit.prevent=\"submitForm\">\n                <div class=\"form-group\">\n                    <label for=\"type\">Тип оборудования</label>\n                    <input type=\"text\" class=\"form-control\" id=\"type\" v-model=\"fk_type\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"serial_number\">Серийный номер</label>\n                    <input type=\"text\" class=\"form-control\" id=\"serial_number\" v-model=\"serial_number\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"text\">Примечание</label>\n                    <textarea class=\"form-control\" id=\"text\" v-model=\"text\"></textarea>\n                </div>\n                <div class=\"form-group\">\n                    <button type=\"submit\">Добавить</button>\n                </div>\n            </form>\n        </div>\n        <div class=\"equipment_content\">\n            <h1>Оборудование</h1>\n            <ul class=\"equipment_list\">\n                <li v-for=\"item in data.results\" :key=\"item.id\">\n                    <h3>Тип оборудования: {{ item.fk_type }}</h3>\n                    <p>Серийный номер: {{ item.serial_number }}</p>\n                    <p>Примечание: {{ item.text }}</p>\n                    <button @click=\"toggleEquipment(item)\">\n                        {{ item.completed ? 'Отменить' : 'Редактировать' }}\n                    </button>\n                    <button @click=\"deleteEquipment(item)\">Удалить</button>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    export default {\n        data() {\n            return {\n                data: [],\n                fk_type: '',\n                serial_number: '',\n                text: ''\n            }\n        },\n        methods: {\n            async getData() {\n                try {\n                    const response = await axios.get('http://127.0.0.1:9000/equipment/');\n                    this.data = response.data;\n                    console.log('received data: ', response.data);\n                } catch (error) {\n                    // log the error\n                    console.log(error);\n                }\n            },\n            async submitForm(){\n                try {\n                    // Send a POST request to the API\n                    const response = await axios.post('http://localhost:9000/equipment/', {\n                        fk_type: this.fk_type,\n                        serial_number: this.serial_number,\n                        text: this.text,\n                        completed: false\n                    });\n                    this.equipment.push(response.data);\n                    this.fk_type = '';\n                    this.serial_number = '';\n                    this.text = '';\n                } catch (error) {\n                    // Log the error\n                    console.log(error);\n                }\n            },\n            async toggleEquipment(item){\n                try{\n\n                    // Send a request to API to update the equipment\n                    const response = await axios.put(`http://localhost:9000/equipment/${item.id}/`, {\n                      cors: {\n                            origin: \"http://localhost:8080\",\n                            methods: [\"POST\"]\n                      },\n                        completed: !item.completed,\n                        fk_type: item.fk_type,\n                        serial_number: item.serial_number,\n                        text: item.text\n                    });\n\n                    let itemIndex = this.equipment.findIndex(e => e.id === item.id);\n\n                    this.equipment = this.equipment.map((item) => {\n                        if(this.equipment.findIndex(e => e.id === item.id) === itemIndex){\n                            return response.data;\n                        }\n                        return item;\n                    });\n\n                }catch(error){\n                    console.log(error);\n                }\n            },\n            async deleteEquipment(item){\n                // Confirm if one wants to delete the item\n                let confirmation = confirm(\"Do you want to delete this item?\");\n                if(confirmation){\n                    try{\n                        // Send a request to delete the item\n                        await axios.delete(`http://localhost:9000/equipment/${item.id}`);\n                        // Refresh the equipment list\n                        this.getData();\n                    }catch(error){\n                        console.log(error)\n                    }\n                }\n            }\n        },\n        created() {\n            this.getData();\n        }\n    }\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
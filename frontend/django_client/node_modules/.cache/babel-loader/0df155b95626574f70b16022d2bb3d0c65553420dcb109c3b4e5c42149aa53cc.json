{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"link\", {\n  href: \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css\",\n  rel: \"stylesheet\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"equipment_container\"\n};\nconst _hoisted_3 = {\n  class: \"add_equipment\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Добавить оборудование\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"type\"\n}, \"Тип оборудования\", -1 /* HOISTED */);\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"serial_number\"\n}, \"Серийный номер\", -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"text\"\n}, \"Примечание\", -1 /* HOISTED */);\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"form-group\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-outline-success w-100 my-3\",\n  type: \"submit\"\n}, \"Добавить\")], -1 /* HOISTED */);\nconst _hoisted_13 = {\n  class: \"equipment_content\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"mt-4\"\n}, \"Список оборудования\", -1 /* HOISTED */);\nconst _hoisted_15 = {\n  class: \"equipment_list\"\n};\nconst _hoisted_16 = {\n  class: \"form-group col-4 mx-auto\"\n};\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"serial_number\"\n}, \"Серийный номер\", -1 /* HOISTED */);\nconst _hoisted_18 = [\"value\", \"onInput\"];\nconst _hoisted_19 = {\n  class: \"form-group col-4 mx-auto\"\n};\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"text\"\n}, \"Примечание\", -1 /* HOISTED */);\nconst _hoisted_21 = [\"value\", \"onInput\"];\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"])),\n    class: \"col-4 mx-auto\"\n  }, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createCommentVNode(\"input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"type\\\" v-model=\\\"fk_type\\\"\"), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.fk_type = $event),\n    class: \"form-control\",\n    onChange: _cache[1] || (_cache[1] = $event => $options.onChangeSelect($event))\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.type.results, (item, indx) => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: indx,\n      value: item.id\n    }, _toDisplayString(item.type_equipment) + \" (id = \" + _toDisplayString(item.id) + \")\", 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.fk_type]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"serial_number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.serial_number = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.serial_number]])]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    id: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.text = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.text]])]), _hoisted_12], 32 /* HYDRATE_EVENTS */)]), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _createElementVNode(\"ul\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.data.results, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id\n    }, [_createElementVNode(\"h3\", null, \"Тип оборудования: \" + _toDisplayString(item.fk_type), 1 /* TEXT */), _createCommentVNode(\"div class=\\\"form-group\\\">\\n                        <label for=\\\"fk_type\\\">Тип оборудования</label>\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"fk_type\\\" :value=\\\"item.fk_type\\\" @input=\\\"item.fk_type = $event.target.value\\\">\\n                    </div\"), _createCommentVNode(\"p>Серийный номер: {{ item.serial_number }}</p\"), _createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      id: \"serial_number\",\n      value: item.serial_number,\n      onInput: $event => item.serial_number = $event.target.value\n    }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_18)]), _createCommentVNode(\"p>Примечание: {{ item.text }}</p\"), _createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _createElementVNode(\"textarea\", {\n      class: \"form-control\",\n      id: \"text\",\n      value: item.text,\n      onInput: $event => item.text = $event.target.value\n    }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_21)]), _createElementVNode(\"button\", {\n      class: \"btn btn-success mx-2 my-3\",\n      onClick: $event => $options.toggleEquipment(item)\n    }, \"Редактировать\", 8 /* PROPS */, _hoisted_22), _createElementVNode(\"button\", {\n      class: \"btn btn-danger mx-2 my-3\",\n      onClick: $event => $options.deleteEquipment(item)\n    }, \"Удалить\", 8 /* PROPS */, _hoisted_23)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","href","rel","class","for","type","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$options","submitForm","_hoisted_5","_hoisted_6","_createCommentVNode","$data","fk_type","$event","onChange","onChangeSelect","_createElementBlock","_Fragment","_renderList","results","item","indx","key","value","id","type_equipment","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","serial_number","_hoisted_10","_hoisted_11","text","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","data","_hoisted_16","_hoisted_17","onInput","target","_hoisted_19","_hoisted_20","onClick","toggleEquipment","_hoisted_22","deleteEquipment","_hoisted_23"],"sources":["/home/pavel/Документы/NEW_DJUNGO_PROJECTS/test_api/frontend/django_client/src/components/EquipmentDrf.vue"],"sourcesContent":["<template>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css\" rel=\"stylesheet\"/>\n    <div class=\"equipment_container\">\n        <div class=\"add_equipment\">\n            <h2>Добавить оборудование</h2>\n            <form v-on:submit.prevent=\"submitForm\" class=\"col-4 mx-auto\">\n                <div class=\"form-group\">\n                    <label for=\"type\">Тип оборудования</label>\n                    <!--input type=\"text\" class=\"form-control\" id=\"type\" v-model=\"fk_type\"-->\n                    <select v-model=\"fk_type\" class=\"form-control\" v-on:change=\"onChangeSelect($event)\">\n                        <option v-for=\"(item, indx) in type.results\" :key=\"indx\" :value=\"item.id\">{{ item.type_equipment }} (id = {{ item.id }})</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"serial_number\">Серийный номер</label>\n                    <input type=\"text\" class=\"form-control\" id=\"serial_number\" v-model=\"serial_number\">\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"text\">Примечание</label>\n                    <textarea class=\"form-control\" id=\"text\" v-model=\"text\"></textarea>\n                </div>\n                <div class=\"form-group\">\n                    <button class=\"btn btn-outline-success w-100 my-3\" type=\"submit\">Добавить</button>\n                </div>\n            </form>\n        </div>\n        <div class=\"equipment_content\">\n            <h1 class=\"mt-4\">Список оборудования</h1>\n            <ul class=\"equipment_list\">\n                <li v-for=\"item in data.results\" :key=\"item.id\">\n                    <h3>Тип оборудования: {{ item.fk_type }}</h3>\n                    <!--div class=\"form-group\">\n                        <label for=\"fk_type\">Тип оборудования</label>\n                        <input type=\"text\" class=\"form-control\" id=\"fk_type\" :value=\"item.fk_type\" @input=\"item.fk_type = $event.target.value\">\n                    </div-->\n                    <!--p>Серийный номер: {{ item.serial_number }}</p-->\n                    <div class=\"form-group col-4 mx-auto\">\n                        <label for=\"serial_number\">Серийный номер</label>\n                        <input type=\"text\" class=\"form-control\" id=\"serial_number\" :value=\"item.serial_number\" @input=\"item.serial_number = $event.target.value\">\n                    </div>\n                    <!--p>Примечание: {{ item.text }}</p-->\n                    <div class=\"form-group col-4 mx-auto\">\n                        <label for=\"text\">Примечание</label>\n                        <textarea class=\"form-control\" id=\"text\" :value=\"item.text\" @input=\"item.text = $event.target.value\" ></textarea>\n                    </div>\n                    <button class=\"btn btn-success mx-2 my-3\" @click=\"toggleEquipment(item)\">Редактировать</button>\n                    <button class=\"btn btn-danger mx-2 my-3\" @click=\"deleteEquipment(item)\">Удалить</button>\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    //import { ref } from 'vue';\n    export default {\n        data() {\n            return {\n                data: [],\n                type: [],\n                fk_type: '',\n                serial_number: '',\n                text: ''\n            }\n        },\n        methods: {\n            onChangeSelect: function(e) {\n                var fk_id = e.target.value;\n                console.log('id = ', fk_id);\n                if (fk_id == '1') {\n                    var regex = new RegExp(/[0-9A-Z]{2}[A-Z]{5}[A-Z0-9]{1}[A-Z]{2}/);\n                }else if (fk_id == '2') {\n                    regex = new RegExp(/[0-9]{1}[A-Z0-9]{2}[A-Z]{2}[0-9A-Z]{1}[-,_,@]{1}[0-9A-Z]{1}[a-z]{2}/);\n                }else if (fk_id == '3') {\n                    regex = new RegExp(/[0-9]{1}[A-Z]{4}[0-9A-Z]{1}[-,_,@]{1}[0-9A-Z]{3}/);\n                }\n                console.log('regex = ',  regex);\n            },\n            async getData() {\n                try {\n                    const response = await axios.get('http://127.0.0.1:9000/equipment/');\n                    this.data = response.data;\n                } catch (error) {\n                    // log the error\n                    console.log(error);\n                }\n            },\n            async getType() {\n                try {\n                    const response = await axios.get('http://127.0.0.1:9000/equipment-type/');\n                    this.type = response.data;\n                } catch (error) {\n                    // log the error\n                    console.log(error);\n                }\n            },\n            async submitForm(){\n                var ser = document.getElementById('serial_number').value;\n                console.log('ser_num = ', ser);\n                if (this.regex.test(ser) == true) {\n                    try {\n                        // Send a POST request to the API\n                        await axios.post('http://localhost:9000/equipment/', {\n                            fk_type: this.fk_type,\n                            serial_number: this.serial_number,\n                            text: this.text,\n                            completed: false\n                        });\n                        console.log('this.fk_type = ', this.fk_type);\n                        //this.data.push(response.data);\n                        this.getData();\n                        this.fk_type = '';\n                        this.serial_number = '';\n                        this.text = '';\n                    } catch (error) {\n                        // Log the error\n                        console.log(error);\n                    }\n                }else {\n                    document.getElementById('serial_number').after('Ошибка введения серийного номера для данного типа оборудования');\n                    return false;\n                }\n\n            },\n            async deleteEquipment(item){\n                let confirmation = confirm(\"Вы действительно хотите удалить оборудование?\");\n                if(confirmation){\n                    try{\n                        // Send a request to delete the item\n                        await axios.delete(`http://localhost:9000/equipment/${item.id}`);\n                        // Refresh the equipment list\n                        this.getData();\n                    }catch(error){\n                        console.log(error)\n                    }\n                }\n            },\n            async toggleEquipment(item){\n                try{\n\n                    // Send a request to API to update the equipment\n                    const response = await axios.put(`http://localhost:9000/equipment/${item.id}/`, {\n                        //completed: false,\n                        fk_type: item.fk_type,\n                        serial_number: item.serial_number,\n                        text: item.text\n                    });\n                    console.log('response.data = ', response.data);\n                }catch(error){\n                    // Log any error\n                    console.log(error);\n                }\n            }\n        },\n        created() {\n            this.getData();\n            this.getType();\n        }\n    }\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}